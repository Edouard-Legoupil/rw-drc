## Mapping Conflict in the DRC


This documentation is divded into two parts. The first section covers how to set up github and fork the project, and explains the site architecture with file descriptions. The second section backs up to data processing and map design by providing links to tools to download, and docs for working with Sqlite and Tilemill. 

##Github and Site Architecture

###Setting up Github
 - [Create an account](https://github.com/signup/free)
 - [Set up Git](http://help.github.com/mac-set-up-git/)
 - [Forking a repository](http://help.github.com/fork-a-repo/)


### Forking the project
To use this project as a starting point, [fork the repository](http://help.github.com/fork-a-repo). This will create a new copy of the project on github. Make changes by setting up a local repo, and then commit/push changes to github.

###Files
-----

    _includes/     Javascript and css files.
    _layouts/      Major page templates.
    _posts/        Content. Data, sources, about.
    _site/         The static site generated by Jekyll.
    data/          Csv and json files of data for drawer.
    fonts/         Fonts.
    images/        Images.
    tilemill/      Internews-media tilemill project.
    404.html       Custom 404 page - only works with gh-pages.
    CNAME          CNAME record. See http://pages.github.com under 'Custom domains' to see how this works with github pages
    README.md      This file.
    _config.yml    Jekyll configuration file.
    404.html       Custom 404 page - only works with gh-pages.
    import.rb      An import script designed to split the data from csv into indivdual .json files per province
    index.html     Home page.
    site.css       Aggregated site css.
    site.js        Aggregated site scripts.


###Jekyll
The site uses Jekyll, a simple, logic aware, static site generator. In a nutshell you build a site with all the logic and source files you need and Jekyll creates a static copy of the website in a '_site/' directory. Note that you do not touch the contents of this directory. You make any additions or changes to the files outside of this.

Make sure you have [Xcode](https://developer.apple.com/technologies/tools/) installed before installing Jekyll. This is available for free in the Apple App store.  Once this is complete you should be able to run: 

- `gem install jekyll`

If this doesn't work, read documentation [available here](https://github.com/mojombo/jekyll/wiki/install) about updating your ruby packages.

Once jekyll is installed, and you have downloaded the project, from terminal, navigate into the directory the project is in and type 'jekyll'. Locally, the site can be viewed at `http://0.0.0.0:4000/index.html` in any browser after it has been generated for the first time. This allows you to make local changes that are automatically reflected in your local version of the site, as long as jekyll is running in your terminal. To stop jekyll, type 'command c'.

####Site Configuration
`_config.yml` sets up the default configuration for jekyll when reading all files. As seen below, it allows you to format the url, and allows for the exclusion of unnecessary files that jekyll doesn't need to generate.

		auto: true
		server: true
		exclude:
		  - README.md
		  - import.rb
		  - tilemill
		permalink: /:title
		baseurl: /internews-media

####Adding new pages
Jekyll allows for easy referencing and adding logic for other pages in the header of each new page that you create. For our use case, in `0200-01-02-about.html`, the header includes several options:

		title: About the Data
		category: about
		tags: about
		layout: pages

We reference posts with 'tags' and 'category' to control their display from the template pages located in '_layouts/'. The logic contained in these template files uses Liquid. You can learn more about the [Liquid Templating System](https://github.com/shopify/liquid/wiki/liquid-for-designers) for more information on creating relationships between files in the `_site` directory.

####Naming conventions
Jekyll has a default chronological pagination system. Posts are ordered such that the most *recent* post appears first, so we created fake dates to ensure hierarchy between the 'About' and 'Sources' links in the _posts directory.

    hierarchy    file name
    --------     ---------
     1           0200-01-02-about.html
     2           0200-01-01-data.html
     2       	 0200-01-01-sources.html

###Notes
Where something requires explanation there are inline notes in the code. See line [1-16 in site.js](https://github.com/developmentseed/internews-media/blob/gh-pages/_includes/js/site.js#L1-16)


This is practice 